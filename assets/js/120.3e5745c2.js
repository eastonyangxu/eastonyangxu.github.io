(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{626:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("es 如果创建了模板，在创建表格的时候会使用模板创建表格的 mapping。")]),s._v(" "),a("p",[s._v("mapping 类似于 mysql 表格的数据类型。")]),s._v(" "),a("p",[s._v("如果没有模板也没有创建 mapping，新增数据时会自动创建数据类型。"),a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/mapping.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板"}},[s._v("#")]),s._v(" 模板")]),s._v(" "),a("h3",{attrs:{id:"创建模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建模板"}},[s._v("#")]),s._v(" 创建模板")]),s._v(" "),a("p",[a("a",{attrs:{href:"/es/template_accounts.json",download:"template_accounts.json"}},[s._v("点击下载：template_accounts.json 文件")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# template_accounts：模板的名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @template_accounts.json 模板文件路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/_template/template_accounts'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@template_accounts.json'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"查看所有模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看所有模板"}},[s._v("#")]),s._v(" 查看所有模板")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/_cat/templates'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"查看模板内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看模板内容"}},[s._v("#")]),s._v(" 查看模板内容")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/_template/template_accounts?pretty'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"删除模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除模板"}},[s._v("#")]),s._v(" 删除模板")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XDELETE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/_template/template_accounts'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"mapping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mapping"}},[s._v("#")]),s._v(" mapping")]),s._v(" "),a("h3",{attrs:{id:"查看-index-下的-mapping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-index-下的-mapping"}},[s._v("#")]),s._v(" 查看 index 下的 mapping")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/accounts/_mapping'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"查看所有-mapping-不常用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看所有-mapping-不常用"}},[s._v("#")]),s._v(" 查看所有 mapping（不常用）")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/_mapping'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"创建新的-mappings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建新的-mappings"}},[s._v("#")]),s._v(" 创建新的 mappings")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XPUT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/newaccounts'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'\n {"mappings": {"properties": {"user": {"type": "keyword"}, "title": {"type": "keyword"}, "desc": {"type": "keyword"}}}}\'')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"修改-mapping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-mapping"}},[s._v("#")]),s._v(" 修改 mapping")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据迁移，复制旧索引数据到新索引中，如果新索引不存在会自动创建，es不能修改mapping，可以通过备份的方式来实现。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-XPOST")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:9200/_reindex'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"source": {"index": "旧index"}, "dest": {"index": "新index", "op_type": "create"}}\'')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);